INFO     2022-12-02 07:08:12.084 request id: app - uvicorn.server:serve - Started server process [17044]
INFO     2022-12-02 07:08:12.085 request id: app - uvicorn.server:serve - Started server process [17044]
INFO     2022-12-02 07:08:12.085 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-02 07:08:12.085 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-02 07:08:12.086 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-02 07:08:12.086 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-02 07:08:15.446 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57258 - "GET /favicon.ico HTTP/1.1" 404
INFO     2022-12-02 07:08:15.643 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57258 - "GET /docs HTTP/1.1" 200
INFO     2022-12-02 07:08:16.210 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57258 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-02 07:08:18.190 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57258 - "POST /api/v1/login/access-token HTTP/1.1" 500
ERROR    2022-12-02 07:08:18.191 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 418, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                      │                └ <function AsyncAdapt_asyncpg_connection._prepare at 0x000001A059F212D0>
                                      └ <AdaptedConnection <asyncpg.connection.Connection object at 0x000001A05A7ACAC0>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 660, in _prepare
    prepared_stmt = await self._connection.prepare(operation)
                          │    │                   └ 'SELECT "user".id, "user".email, "user".hashed_password, "user".role, "user".full_name, "user".username, "user".avatar, "user...
                          │    └ <member '_connection' of 'AsyncAdapt_asyncpg_connection' objects>
                          └ <AdaptedConnection <asyncpg.connection.Connection object at 0x000001A05A7ACAC0>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\asyncpg\connection.py", line 565, in prepare
    return await self._prepare(
                 │    └ <function Connection._prepare at 0x000001A05A27A170>
                 └ <asyncpg.connection.Connection object at 0x000001A05A7ACAC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\asyncpg\connection.py", line 583, in _prepare
    stmt = await self._get_statement(
                 │    └ <function Connection._get_statement at 0x000001A05A279EA0>
                 └ <asyncpg.connection.Connection object at 0x000001A05A7ACAC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\asyncpg\connection.py", line 397, in _get_statement
    statement = await self._protocol.prepare(
                      │    └ <member '_protocol' of 'Connection' objects>
                      └ <asyncpg.connection.Connection object at 0x000001A05A7ACAC0>

  File "asyncpg\protocol\protocol.pyx", line 168, in prepare

asyncpg.exceptions.UndefinedTableError: relation "user" does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1900, in _execute_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001A059B53130>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000001A05A4A31C0>
    └ <sqlalchemy.future.engine.Connection object at 0x000001A05A7A9CC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin@gmail.com',)
    │      │       └ 'SELECT "user".id, "user".email, "user".hashed_password, "user".role, "user".full_name, "user".username, "user".avatar, "user...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000001A059F20820>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 68, in await_only
    return current.driver.switch(awaitable)
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001A05A7BC820>
           └ <_AsyncIoGreenlet object at 0x000001A05A4EEC00 (otid=0x000001A058D4E220) dead>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 121, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001A05A7BC820>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000001A059F205E0>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedTableError('relation "user" does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedTableError('relation "user" does not exist')
          └ ProgrammingError('<class \'asyncpg.exceptions.UndefinedTableError\'>: relation "user" does not exist')

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedTableError'>: relation "user" does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001A05602E290>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001A055F900D0>
           └ <SpawnProcess name='SpawnProcess-1' parent=28940 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A055F876D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=28940 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A055EF3910>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=28940 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=28940 started>
    │    └ <function subprocess_started at 0x000001A058361750>
    └ <SpawnProcess name='SpawnProcess-1' parent=28940 started>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A055EF3010>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001A05833A320>
           │       │   └ <uvicorn.server.Server object at 0x000001A055EF3010>
           │       └ <function run at 0x000001A057BD4AF0>
           └ <module 'asyncio' from 'C:\\Users\\R\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A05834D070>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A057BD64D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 633, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A057BD6440>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 600, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A057BD7F40>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1896, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A0563BF7F0>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

> File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 407, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A05836D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733190>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A05A6425C0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A05836D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\applications.py", line 270, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733190>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733190>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A05A681EA0>
          └ <fastapi.applications.FastAPI object at 0x000001A05A6425C0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A058363910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A05A681DB0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A05A681EA0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '61', 'sec-ch-ua': '"Not?A_Brand";v="8", "Ch...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A058363910>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001A058CD8430>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A05A681DB0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A05A681DB0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A05A681D80>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A05A681DB0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A05A687EB0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A05A681D20>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A05A681D80>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A05A687EB0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001A05A643220>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A05A681D20>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 706, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A05A687EB0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001A058C565F0>
          └ APIRoute(path='/api/v1/login/access-token', name='login_access_token', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A05A687EB0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001A05A6863B0>
          └ APIRoute(path='/api/v1/login/access-token', name='login_access_token', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A05A707CD0>
                     └ <function get_request_handler.<locals>.app at 0x000001A05A65F1C0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 235, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A058C55240>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 161, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000001A05A73DBA0>, 'form_data': <fastapi.security.oauth2.OAuth2Passwo...
                 │         └ <function login_access_token at 0x000001A059E50820>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A05836C9A0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\api\api_v1\endpoints\login.py", line 26, in login_access_token
    user = await crud.user.authenticate(
                 │    │    └ <function CRUDUser.authenticate at 0x000001A05A4D1FC0>
                 │    └ <backend.app.crud.user.CRUDUser object at 0x000001A05A1C4070>
                 └ <module 'backend.app.crud' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\.\\backend\\app\\crud\\__init__.py'>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\crud\user.py", line 78, in authenticate
    user = await self.get_by_email(db, email=email)  # noqa
                 │    │            │         └ 'admin@gmail.com'
                 │    │            └ <sqlalchemy.orm.session.AsyncSession object at 0x000001A05A73DBA0>
                 │    └ <function CRUDUser.get_by_email at 0x000001A05A4D1EA0>
                 └ <backend.app.crud.user.CRUDUser object at 0x000001A05A1C4070>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\crud\user.py", line 50, in get_by_email
    result: Result = await db.execute(sqlalchemy.select(User).where(User.email == email))
                           │  │       │          │      │           │    │        └ 'admin@gmail.com'
                           │  │       │          │      │           │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001A059F69850>
                           │  │       │          │      │           └ <class 'backend.app.models.user.User'>
                           │  │       │          │      └ <class 'backend.app.models.user.User'>
                           │  │       │          └ <function select at 0x000001A059A65120>
                           │  │       └ <module 'sqlalchemy' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\venv\\lib\\site-packages\\sqlalchemy\\__...
                           │  └ <function AsyncSession.execute at 0x000001A059E46290>
                           └ <sqlalchemy.orm.session.AsyncSession object at 0x000001A05A73DBA0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 214, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x000001A058DD0DC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 126, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x000001A05A4EEC00 (otid=0x000001A058D4E220) dead>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1714, in execute
    result = conn._execute_20(statement, params or {}, execution_options)
             │    │           │          │             └ immutabledict({'prebuffer_rows': True, '_result_disable_adapt_to_context': True, 'future_result': True})
             │    │           │          └ None
             │    │           └ <sqlalchemy.sql.selectable.Select object at 0x000001A0591386D0>
             │    └ <function Connection._execute_20 at 0x000001A059AA1D80>
             └ <sqlalchemy.future.engine.Connection object at 0x000001A05A7A9CC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1705, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
           │    │     │             │               └ immutabledict({'prebuffer_rows': True, '_result_disable_adapt_to_context': True, 'future_result': True})
           │    │     │             └ immutabledict({})
           │    │     └ ({},)
           │    └ <sqlalchemy.future.engine.Connection object at 0x000001A05A7A9CC0>
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x000001A0591386D0>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001A059AA1BD0>
           └ <sqlalchemy.future.engine.Connection object at 0x000001A05A7A9CC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1572, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001A059AA1EA0>
          └ <sqlalchemy.future.engine.Connection object at 0x000001A05A7A9CC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1943, in _execute_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001A059AA2050>
    └ <sqlalchemy.future.engine.Connection object at 0x000001A05A7A9CC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2124, in _handle_dbapi_exception
    util.raise_(
    │    └ <function raise_ at 0x000001A058D6E050>
    └ <module 'sqlalchemy.util' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\venv\\lib\\site-packages\\sqlalchem...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\compat.py", line 210, in raise_
    raise exception

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1900, in _execute_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001A059B53130>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000001A05A4A31C0>
    └ <sqlalchemy.future.engine.Connection object at 0x000001A05A7A9CC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin@gmail.com',)
    │      │       └ 'SELECT "user".id, "user".email, "user".hashed_password, "user".role, "user".full_name, "user".username, "user".avatar, "user...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000001A059F20820>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 68, in await_only
    return current.driver.switch(awaitable)
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001A05A7BC820>
           └ <_AsyncIoGreenlet object at 0x000001A05A4EEC00 (otid=0x000001A058D4E220) dead>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 121, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001A05A7BC820>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000001A059F205E0>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedTableError('relation "user" does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedTableError('relation "user" does not exist')
          └ ProgrammingError('<class \'asyncpg.exceptions.UndefinedTableError\'>: relation "user" does not exist')

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: relation "user" does not exist
[SQL: SELECT "user".id, "user".email, "user".hashed_password, "user".role, "user".full_name, "user".username, "user".avatar, "user".phone, "user".is_active, "user".is_superuser, "user".create_date 
FROM "user" 
WHERE "user".email = %s]
[parameters: ('admin@gmail.com',)]
(Background on this error at: https://sqlalche.me/e/14/f405)
ERROR    2022-12-02 07:08:18.218 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 418, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                      │                └ <function AsyncAdapt_asyncpg_connection._prepare at 0x000001A059F212D0>
                                      └ <AdaptedConnection <asyncpg.connection.Connection object at 0x000001A05A7ACAC0>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 660, in _prepare
    prepared_stmt = await self._connection.prepare(operation)
                          │    │                   └ 'SELECT "user".id, "user".email, "user".hashed_password, "user".role, "user".full_name, "user".username, "user".avatar, "user...
                          │    └ <member '_connection' of 'AsyncAdapt_asyncpg_connection' objects>
                          └ <AdaptedConnection <asyncpg.connection.Connection object at 0x000001A05A7ACAC0>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\asyncpg\connection.py", line 565, in prepare
    return await self._prepare(
                 │    └ <function Connection._prepare at 0x000001A05A27A170>
                 └ <asyncpg.connection.Connection object at 0x000001A05A7ACAC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\asyncpg\connection.py", line 583, in _prepare
    stmt = await self._get_statement(
                 │    └ <function Connection._get_statement at 0x000001A05A279EA0>
                 └ <asyncpg.connection.Connection object at 0x000001A05A7ACAC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\asyncpg\connection.py", line 397, in _get_statement
    statement = await self._protocol.prepare(
                      │    └ <member '_protocol' of 'Connection' objects>
                      └ <asyncpg.connection.Connection object at 0x000001A05A7ACAC0>

  File "asyncpg\protocol\protocol.pyx", line 168, in prepare

asyncpg.exceptions.UndefinedTableError: relation "user" does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1900, in _execute_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001A059B53130>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000001A05A4A31C0>
    └ <sqlalchemy.future.engine.Connection object at 0x000001A05A7A9CC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin@gmail.com',)
    │      │       └ 'SELECT "user".id, "user".email, "user".hashed_password, "user".role, "user".full_name, "user".username, "user".avatar, "user...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000001A059F20820>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 68, in await_only
    return current.driver.switch(awaitable)
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001A05A7BC820>
           └ <_AsyncIoGreenlet object at 0x000001A05A4EEC00 (otid=0x000001A058D4E220) dead>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 121, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001A05A7BC820>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000001A059F205E0>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedTableError('relation "user" does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedTableError('relation "user" does not exist')
          └ ProgrammingError('<class \'asyncpg.exceptions.UndefinedTableError\'>: relation "user" does not exist')

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedTableError'>: relation "user" does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001A05602E290>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001A055F900D0>
           └ <SpawnProcess name='SpawnProcess-1' parent=28940 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001A055F876D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=28940 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001A055EF3910>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=28940 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=28940 started>
    │    └ <function subprocess_started at 0x000001A058361750>
    └ <SpawnProcess name='SpawnProcess-1' parent=28940 started>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001A055EF3010>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=776, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001A05833A320>
           │       │   └ <uvicorn.server.Server object at 0x000001A055EF3010>
           │       └ <function run at 0x000001A057BD4AF0>
           └ <module 'asyncio' from 'C:\\Users\\R\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001A05834D070>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001A057BD64D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 633, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001A057BD6440>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 600, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A057BD7F40>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1896, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A0563BF7F0>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

> File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 407, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A05836D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733190>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001A05A6425C0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001A05836D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\applications.py", line 270, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733190>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733190>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A05A681EA0>
          └ <fastapi.applications.FastAPI object at 0x000001A05A6425C0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A058363910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A05A681DB0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001A05A681EA0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '61', 'sec-ch-ua': '"Not?A_Brand";v="8", "Ch...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001A058363910>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001A058CD8430>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A05A681DB0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001A05A681DB0...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A05A681D80>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001A05A681DB0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A05A687EB0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A05A681D20>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001A05A681D80>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A05A687EB0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001A05A643220>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001A05A681D20>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 706, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A05A687EB0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001A058C565F0>
          └ APIRoute(path='/api/v1/login/access-token', name='login_access_token', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001A05A687EB0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001A05A733...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001A05A6863B0>
          └ APIRoute(path='/api/v1/login/access-token', name='login_access_token', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001A05A707CD0>
                     └ <function get_request_handler.<locals>.app at 0x000001A05A65F1C0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 235, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001A058C55240>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 161, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000001A05A73DBA0>, 'form_data': <fastapi.security.oauth2.OAuth2Passwo...
                 │         └ <function login_access_token at 0x000001A059E50820>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001A05836C9A0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\api\api_v1\endpoints\login.py", line 26, in login_access_token
    user = await crud.user.authenticate(
                 │    │    └ <function CRUDUser.authenticate at 0x000001A05A4D1FC0>
                 │    └ <backend.app.crud.user.CRUDUser object at 0x000001A05A1C4070>
                 └ <module 'backend.app.crud' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\.\\backend\\app\\crud\\__init__.py'>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\crud\user.py", line 78, in authenticate
    user = await self.get_by_email(db, email=email)  # noqa
                 │    │            │         └ 'admin@gmail.com'
                 │    │            └ <sqlalchemy.orm.session.AsyncSession object at 0x000001A05A73DBA0>
                 │    └ <function CRUDUser.get_by_email at 0x000001A05A4D1EA0>
                 └ <backend.app.crud.user.CRUDUser object at 0x000001A05A1C4070>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\crud\user.py", line 50, in get_by_email
    result: Result = await db.execute(sqlalchemy.select(User).where(User.email == email))
                           │  │       │          │      │           │    │        └ 'admin@gmail.com'
                           │  │       │          │      │           │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001A059F69850>
                           │  │       │          │      │           └ <class 'backend.app.models.user.User'>
                           │  │       │          │      └ <class 'backend.app.models.user.User'>
                           │  │       │          └ <function select at 0x000001A059A65120>
                           │  │       └ <module 'sqlalchemy' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\venv\\lib\\site-packages\\sqlalchemy\\__...
                           │  └ <function AsyncSession.execute at 0x000001A059E46290>
                           └ <sqlalchemy.orm.session.AsyncSession object at 0x000001A05A73DBA0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 214, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x000001A058DD0DC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 126, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x000001A05A4EEC00 (otid=0x000001A058D4E220) dead>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1714, in execute
    result = conn._execute_20(statement, params or {}, execution_options)
             │    │           │          │             └ immutabledict({'prebuffer_rows': True, '_result_disable_adapt_to_context': True, 'future_result': True})
             │    │           │          └ None
             │    │           └ <sqlalchemy.sql.selectable.Select object at 0x000001A0591386D0>
             │    └ <function Connection._execute_20 at 0x000001A059AA1D80>
             └ <sqlalchemy.future.engine.Connection object at 0x000001A05A7A9CC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1705, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
           │    │     │             │               └ immutabledict({'prebuffer_rows': True, '_result_disable_adapt_to_context': True, 'future_result': True})
           │    │     │             └ immutabledict({})
           │    │     └ ({},)
           │    └ <sqlalchemy.future.engine.Connection object at 0x000001A05A7A9CC0>
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x000001A0591386D0>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001A059AA1BD0>
           └ <sqlalchemy.future.engine.Connection object at 0x000001A05A7A9CC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1572, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001A059AA1EA0>
          └ <sqlalchemy.future.engine.Connection object at 0x000001A05A7A9CC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1943, in _execute_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001A059AA2050>
    └ <sqlalchemy.future.engine.Connection object at 0x000001A05A7A9CC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2124, in _handle_dbapi_exception
    util.raise_(
    │    └ <function raise_ at 0x000001A058D6E050>
    └ <module 'sqlalchemy.util' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\venv\\lib\\site-packages\\sqlalchem...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\compat.py", line 210, in raise_
    raise exception

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1900, in _execute_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001A059B53130>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000001A05A4A31C0>
    └ <sqlalchemy.future.engine.Connection object at 0x000001A05A7A9CC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin@gmail.com',)
    │      │       └ 'SELECT "user".id, "user".email, "user".hashed_password, "user".role, "user".full_name, "user".username, "user".avatar, "user...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000001A059F20820>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 68, in await_only
    return current.driver.switch(awaitable)
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001A05A7BC820>
           └ <_AsyncIoGreenlet object at 0x000001A05A4EEC00 (otid=0x000001A058D4E220) dead>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 121, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001A05A7BC820>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000001A059F205E0>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedTableError('relation "user" does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001A05A7BC580>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedTableError('relation "user" does not exist')
          └ ProgrammingError('<class \'asyncpg.exceptions.UndefinedTableError\'>: relation "user" does not exist')

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: relation "user" does not exist
[SQL: SELECT "user".id, "user".email, "user".hashed_password, "user".role, "user".full_name, "user".username, "user".avatar, "user".phone, "user".is_active, "user".is_superuser, "user".create_date 
FROM "user" 
WHERE "user".email = %s]
[parameters: ('admin@gmail.com',)]
(Background on this error at: https://sqlalche.me/e/14/f405)
INFO     2022-12-02 07:08:50.580 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57259 - "POST /api/v1/login/access-token HTTP/1.1" 200
INFO     2022-12-02 07:08:55.600 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-02 07:08:55.604 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-02 07:08:55.604 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-02 07:08:55.608 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-02 07:08:55.611 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role not exist
INFO     2022-12-02 07:08:55.616 request id: app - backend.app.api.deps:create_user_in_role - CREATE_user_in_role: iam965
INFO     2022-12-02 07:08:55.617 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-02 07:08:55.620 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-02 07:08:55.621 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-02 07:08:55.624 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-02 07:08:55.625 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-02 07:08:55.635 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:57282 - "GET /api/v1/users/?sort=%5B%22id%22%2C%20%22ASC%22%5D&range=%5B0%2C%2010%5D HTTP/1.1" 200
INFO     2022-12-02 07:09:00.607 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-02 07:09:00.608 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-02 07:09:00.716 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-02 07:09:00.716 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-02 07:09:00.717 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-02 07:09:00.717 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-02 07:09:00.717 request id: app - uvicorn.server:serve - Finished server process [17044]
INFO     2022-12-02 07:09:00.718 request id: app - uvicorn.server:serve - Finished server process [17044]
INFO     2022-12-02 09:09:09.488 request id: app - uvicorn.server:serve - Started server process [16048]
INFO     2022-12-02 09:09:09.492 request id: app - uvicorn.server:serve - Started server process [16048]
INFO     2022-12-02 09:09:09.492 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-02 09:09:09.493 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-02 09:09:09.495 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-02 09:09:09.496 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-02 09:09:09.695 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61522 - "GET / HTTP/1.1" 200
INFO     2022-12-02 09:09:13.527 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61522 - "GET /favicon.ico HTTP/1.1" 404
INFO     2022-12-02 09:09:14.069 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61522 - "GET /redoc HTTP/1.1" 200
INFO     2022-12-02 09:09:14.321 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61522 - "GET /docs HTTP/1.1" 200
INFO     2022-12-02 09:09:15.055 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61522 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-02 09:09:20.290 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61522 - "POST /api/v1/login/access-token HTTP/1.1" 200
INFO     2022-12-02 09:09:25.326 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-02 09:09:25.330 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-02 09:09:25.331 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-02 09:09:25.341 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-02 09:09:25.350 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role not exist
INFO     2022-12-02 09:09:25.368 request id: app - backend.app.api.deps:create_user_in_role - CREATE_user_in_role: iam965
INFO     2022-12-02 09:09:25.368 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-02 09:09:25.375 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-02 09:09:25.376 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-02 09:09:25.385 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-02 09:09:25.386 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-02 09:09:25.412 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61521 - "GET /api/v1/users/?sort=%5B%22id%22%2C%20%22ASC%22%5D&range=%5B0%2C%2010%5D HTTP/1.1" 200
INFO     2022-12-02 09:09:50.392 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61524 - "POST /api/v1/login/access-token HTTP/1.1" 200
INFO     2022-12-02 09:10:29.816 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-02 09:10:29.816 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:11:59.602 request id: app - uvicorn.server:serve - Started server process [32432]
INFO     2022-12-03 11:11:59.602 request id: app - uvicorn.server:serve - Started server process [32432]
INFO     2022-12-03 11:11:59.602 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:11:59.603 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:11:59.603 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:11:59.604 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:12:01.248 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61334 - "GET / HTTP/1.1" 200
INFO     2022-12-03 11:12:02.249 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61334 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 11:12:02.289 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61334 - "GET /favicon.ico HTTP/1.1" 404
INFO     2022-12-03 11:12:02.679 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61334 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 11:12:07.666 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61334 - "POST /api/v1/login/access-token HTTP/1.1" 200
INFO     2022-12-03 11:12:44.220 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:12:44.220 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:12:44.330 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:12:44.330 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:12:44.331 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:12:44.331 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:12:44.332 request id: app - uvicorn.server:serve - Finished server process [32432]
INFO     2022-12-03 11:12:44.332 request id: app - uvicorn.server:serve - Finished server process [32432]
INFO     2022-12-03 11:15:51.305 request id: app - uvicorn.server:serve - Started server process [21784]
INFO     2022-12-03 11:15:51.305 request id: app - uvicorn.server:serve - Started server process [21784]
INFO     2022-12-03 11:15:51.305 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:15:51.305 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:15:51.306 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:15:51.306 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:15:52.259 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61622 - "GET /redoc HTTP/1.1" 200
INFO     2022-12-03 11:15:52.417 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61622 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 11:15:52.894 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61622 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 11:15:55.974 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61622 - "POST /api/v1/login/access-token HTTP/1.1" 200
INFO     2022-12-03 11:16:22.028 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 11:16:22.030 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:16:22.030 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 11:16:22.033 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:16:22.036 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role not exist
INFO     2022-12-03 11:16:22.040 request id: app - backend.app.api.deps:create_user_in_role - CREATE_user_in_role: iam965
INFO     2022-12-03 11:16:22.040 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 11:16:22.042 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:16:22.043 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 11:16:22.045 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 11:16:22.046 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 11:16:22.053 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61623 - "GET /api/v1/users/?sort=%5B%22id%22%2C%20%22ASC%22%5D&range=%5B0%2C%2010%5D HTTP/1.1" 200
INFO     2022-12-03 11:17:41.383 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:17:41.383 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:17:41.494 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:17:41.494 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:17:41.495 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:17:41.495 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:17:41.495 request id: app - uvicorn.server:serve - Finished server process [21784]
INFO     2022-12-03 11:17:41.496 request id: app - uvicorn.server:serve - Finished server process [21784]
INFO     2022-12-03 11:17:42.946 request id: app - uvicorn.server:serve - Started server process [25096]
INFO     2022-12-03 11:17:42.946 request id: app - uvicorn.server:serve - Started server process [25096]
INFO     2022-12-03 11:17:42.946 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:17:42.947 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:17:42.947 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:17:42.947 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:19:23.057 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 11:19:23.059 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:19:23.059 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 11:19:23.062 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:19:23.064 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role not exist
INFO     2022-12-03 11:19:23.068 request id: app - backend.app.api.deps:create_user_in_role - CREATE_user_in_role: iam965
INFO     2022-12-03 11:19:23.069 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 11:19:23.071 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:19:23.071 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 11:19:23.074 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 11:19:23.074 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 11:19:23.087 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61729 - "GET /api/v1/users/?sort=%5B%22id%22%2C%20%22ASC%22%5D&range=%5B0%2C%2010%5D HTTP/1.1" 200
INFO     2022-12-03 11:21:12.056 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:21:12.056 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:21:12.167 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:21:12.167 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:21:12.168 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:21:12.168 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:21:12.169 request id: app - uvicorn.server:serve - Finished server process [25096]
INFO     2022-12-03 11:21:12.169 request id: app - uvicorn.server:serve - Finished server process [25096]
INFO     2022-12-03 11:21:13.754 request id: app - uvicorn.server:serve - Started server process [23960]
INFO     2022-12-03 11:21:13.755 request id: app - uvicorn.server:serve - Started server process [23960]
INFO     2022-12-03 11:21:13.755 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:21:13.755 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:21:13.756 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:21:13.756 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:21:17.084 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 11:21:17.086 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:21:17.087 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 11:21:17.089 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:21:17.092 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role not exist
INFO     2022-12-03 11:21:17.173 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61769 - "GET /api/v1/users/?sort=%5B%22id%22%2C%20%22ASC%22%5D&range=%5B0%2C%2010%5D HTTP/1.1" 500
ERROR    2022-12-03 11:21:17.174 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x00000151DE1BE290>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x00000151DE1200D0>
           └ <SpawnProcess name='SpawnProcess-1' parent=7144 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000151DE1176D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=7144 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000151DE083910>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=7144 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=7144 started>
    │    └ <function subprocess_started at 0x00000151E04D1750>
    └ <SpawnProcess name='SpawnProcess-1' parent=7144 started>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=720, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000151DE083010>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=720, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000151E04AA320>
           │       │   └ <uvicorn.server.Server object at 0x00000151DE083010>
           │       └ <function run at 0x00000151DFD44AF0>
           └ <module 'asyncio' from 'C:\\Users\\R\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000151E04BD070>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000151DFD464D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 633, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000151DFD46440>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 600, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000151DFD47F40>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1896, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000151DE52F7F0>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

> File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 407, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000151E04DD060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877D30>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000151E27AE950>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000151E04DD060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\applications.py", line 270, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877D30>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877D30>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000151E27EE230>
          └ <fastapi.applications.FastAPI object at 0x00000151E27AE950>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000151E27FBC70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000151E27EE140>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000151E27EE230>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000151E27FBC70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000151E27EE110>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000151E27EE140>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000151E27FBBE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000151E27EE0B0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000151E27EE110>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000151E27FBBE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000151E27AF5B0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000151E27EE0B0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 706, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000151E27FBBE0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000151E0DC65F0>
          └ APIRoute(path='/api/v1/users/', name='read_users', methods=['GET'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000151E27FBBE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000151E27FA5F0>
          └ APIRoute(path='/api/v1/users/', name='read_users', methods=['GET'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000151E2877820>
                     └ <function get_request_handler.<locals>.app at 0x00000151E27FA680>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 225, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x00000151E0DC4AF0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\dependencies\utils.py", line 504, in solve_dependencies
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x00000151E0DC4AF0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\dependencies\utils.py", line 533, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x00000151E2877A00>, 'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ...
                   └ <function get_current_user_async at 0x00000151E26429E0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\api\deps.py", line 72, in get_current_user_async
    await create_user_in_role(conn, user, db_user)
          │                   │     │     └ 'iam965'
          │                   │     └ User(id=1, email='admin@gmail.com', role='admin_base')
          │                   └ <asyncpg.connection.Connection object at 0x00000151E28E6180>
          └ <function create_user_in_role at 0x00000151E2642B00>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\api\deps.py", line 92, in create_user_in_role
    await db.execute(text(create_db_user_q))
          │  │       │    └ "create user iam965 inherit login password '$2b$12$lI2ZqfE8xAPfZZ/XfVr9p.sWN0NiWdCGVkI0QUNV4/b75Jyi4XRcW' valid until 'infini...
          │  │       └ <function text at 0x00000151E1BD12D0>
          │  └ <function Connection.execute at 0x00000151E23E9EA0>
          └ <asyncpg.connection.Connection object at 0x00000151E28E6180>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\asyncpg\connection.py", line 317, in execute
    return await self._protocol.query(query, timeout)
                 │    │               │      └ None
                 │    │               └ <sqlalchemy.sql.elements.TextClause object at 0x00000151E28770D0>
                 │    └ <member '_protocol' of 'Connection' objects>
                 └ <asyncpg.connection.Connection object at 0x00000151E28E6180>

  File "asyncpg\protocol\protocol.pyx", line 338, in query
  File "asyncpg\protocol\protocol.pyx", line 331, in asyncpg.protocol.protocol.BaseProtocol.query

TypeError: Expected unicode, got TextClause
ERROR    2022-12-03 11:21:17.254 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x00000151DE1BE290>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x00000151DE1200D0>
           └ <SpawnProcess name='SpawnProcess-1' parent=7144 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000151DE1176D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=7144 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x00000151DE083910>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=7144 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=7144 started>
    │    └ <function subprocess_started at 0x00000151E04D1750>
    └ <SpawnProcess name='SpawnProcess-1' parent=7144 started>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=720, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x00000151DE083010>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=720, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x00000151E04AA320>
           │       │   └ <uvicorn.server.Server object at 0x00000151DE083010>
           │       └ <function run at 0x00000151DFD44AF0>
           └ <module 'asyncio' from 'C:\\Users\\R\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x00000151E04BD070>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000151DFD464D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 633, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000151DFD46440>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 600, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000151DFD47F40>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1896, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000151DE52F7F0>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

> File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 407, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000151E04DD060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877D30>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x00000151E27AE950>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x00000151E04DD060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\applications.py", line 270, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877D30>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877D30>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000151E27EE230>
          └ <fastapi.applications.FastAPI object at 0x00000151E27AE950>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000151E27FBC70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x00000151E27EE140>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x00000151E27EE230>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 84, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x00000151E27FBC70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000151E27EE110>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x00000151E27EE140>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000151E27FBBE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000151E27EE0B0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x00000151E27EE110>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000151E27FBBE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x00000151E27AF5B0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x00000151E27EE0B0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 706, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000151E27FBBE0>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000151E0DC65F0>
          └ APIRoute(path='/api/v1/users/', name='read_users', methods=['GET'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x00000151E27FBBE0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x00000151E2877...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x00000151E27FA5F0>
          └ APIRoute(path='/api/v1/users/', name='read_users', methods=['GET'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x00000151E2877820>
                     └ <function get_request_handler.<locals>.app at 0x00000151E27FA680>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 225, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x00000151E0DC4AF0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\dependencies\utils.py", line 504, in solve_dependencies
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x00000151E0DC4AF0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\dependencies\utils.py", line 533, in solve_dependencies
    solved = await call(**sub_values)
                   │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x00000151E2877A00>, 'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ...
                   └ <function get_current_user_async at 0x00000151E26429E0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\api\deps.py", line 72, in get_current_user_async
    await create_user_in_role(conn, user, db_user)
          │                   │     │     └ 'iam965'
          │                   │     └ User(id=1, email='admin@gmail.com', role='admin_base')
          │                   └ <asyncpg.connection.Connection object at 0x00000151E28E6180>
          └ <function create_user_in_role at 0x00000151E2642B00>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\api\deps.py", line 92, in create_user_in_role
    await db.execute(text(create_db_user_q))
          │  │       │    └ "create user iam965 inherit login password '$2b$12$lI2ZqfE8xAPfZZ/XfVr9p.sWN0NiWdCGVkI0QUNV4/b75Jyi4XRcW' valid until 'infini...
          │  │       └ <function text at 0x00000151E1BD12D0>
          │  └ <function Connection.execute at 0x00000151E23E9EA0>
          └ <asyncpg.connection.Connection object at 0x00000151E28E6180>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\asyncpg\connection.py", line 317, in execute
    return await self._protocol.query(query, timeout)
                 │    │               │      └ None
                 │    │               └ <sqlalchemy.sql.elements.TextClause object at 0x00000151E28770D0>
                 │    └ <member '_protocol' of 'Connection' objects>
                 └ <asyncpg.connection.Connection object at 0x00000151E28E6180>

  File "asyncpg\protocol\protocol.pyx", line 338, in query
  File "asyncpg\protocol\protocol.pyx", line 331, in asyncpg.protocol.protocol.BaseProtocol.query

TypeError: Expected unicode, got TextClause
INFO     2022-12-03 11:21:41.005 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:21:41.005 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:21:41.116 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:21:41.117 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:21:41.117 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:21:41.118 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:21:41.118 request id: app - uvicorn.server:serve - Finished server process [23960]
INFO     2022-12-03 11:21:41.118 request id: app - uvicorn.server:serve - Finished server process [23960]
INFO     2022-12-03 11:22:27.819 request id: app - uvicorn.server:serve - Started server process [12400]
INFO     2022-12-03 11:22:27.819 request id: app - uvicorn.server:serve - Started server process [12400]
INFO     2022-12-03 11:22:27.820 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:22:27.820 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:22:27.821 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:22:27.821 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:22:34.058 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 11:22:34.060 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:22:34.061 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 11:22:34.064 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:22:34.066 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role not exist
INFO     2022-12-03 11:22:34.104 request id: app - backend.app.api.deps:create_user_in_role - CREATE_user_in_role: iam965
INFO     2022-12-03 11:22:34.105 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 11:22:34.108 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:22:34.109 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 11:22:34.111 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 11:22:34.112 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 11:22:34.127 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61824 - "GET /api/v1/users/?sort=%5B%22id%22%2C%20%22ASC%22%5D&range=%5B0%2C%2010%5D HTTP/1.1" 200
INFO     2022-12-03 11:23:01.831 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:23:01.831 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:23:01.943 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:23:01.943 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:23:01.944 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:23:01.944 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:23:01.945 request id: app - uvicorn.server:serve - Finished server process [12400]
INFO     2022-12-03 11:23:01.945 request id: app - uvicorn.server:serve - Finished server process [12400]
INFO     2022-12-03 11:25:34.399 request id: app - uvicorn.server:serve - Started server process [27164]
INFO     2022-12-03 11:25:34.399 request id: app - uvicorn.server:serve - Started server process [27164]
INFO     2022-12-03 11:25:34.400 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:25:34.400 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:25:34.400 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:25:34.401 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:25:36.931 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61895 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 11:25:37.276 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61895 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 11:25:44.887 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:61896 - "POST /api/v1/login/access-token HTTP/1.1" 200
INFO     2022-12-03 11:27:32.348 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:27:32.348 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:27:35.992 request id: app - uvicorn.server:serve - Started server process [29348]
INFO     2022-12-03 11:27:35.993 request id: app - uvicorn.server:serve - Started server process [29348]
INFO     2022-12-03 11:27:35.994 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:27:35.994 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:27:35.995 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:27:35.995 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:27:48.725 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:27:48.726 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:28:53.222 request id: app - uvicorn.server:serve - Started server process [11080]
INFO     2022-12-03 11:28:53.223 request id: app - uvicorn.server:serve - Started server process [11080]
INFO     2022-12-03 11:28:53.223 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:28:53.223 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:28:53.224 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:28:53.224 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:29:06.867 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:29:06.867 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:29:06.976 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:29:06.976 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:29:06.977 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:29:06.977 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:29:06.977 request id: app - uvicorn.server:serve - Finished server process [11080]
INFO     2022-12-03 11:29:06.979 request id: app - uvicorn.server:serve - Finished server process [11080]
INFO     2022-12-03 11:30:16.362 request id: app - uvicorn.server:serve - Started server process [15212]
INFO     2022-12-03 11:30:16.362 request id: app - uvicorn.server:serve - Started server process [15212]
INFO     2022-12-03 11:30:16.362 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:30:16.363 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:30:16.363 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:30:16.363 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:30:53.079 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:30:53.079 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:30:54.639 request id: app - uvicorn.server:serve - Started server process [29620]
INFO     2022-12-03 11:30:54.639 request id: app - uvicorn.server:serve - Started server process [29620]
INFO     2022-12-03 11:30:54.640 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:30:54.640 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:30:54.641 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:30:54.641 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:30:56.125 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62045 - "GET /redoc HTTP/1.1" 200
INFO     2022-12-03 11:30:56.852 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62045 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 11:30:57.085 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62045 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 11:30:59.530 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62045 - "POST /api/v1/login/access-token HTTP/1.1" 500
ERROR    2022-12-03 11:30:59.531 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001E533EDE290>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001E533E400D0>
           └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001E533E376D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001E533DA3910>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>
    │    └ <function subprocess_started at 0x000001E536171750>
    └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=756, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001E533DA3010>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=756, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001E53614A320>
           │       │   └ <uvicorn.server.Server object at 0x000001E533DA3010>
           │       └ <function run at 0x000001E535A34AF0>
           └ <module 'asyncio' from 'C:\\Users\\R\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001E53615D070>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001E535A364D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 633, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001E535A36440>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 600, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001E535A37F40>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1896, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001E53423F7F0>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

> File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 407, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E53617D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853EF50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001E538446A10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E53617D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\applications.py", line 270, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853EF50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853EF50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E53848E2F0>
          └ <fastapi.applications.FastAPI object at 0x000001E538446A10>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E536173910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E53848E2F0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '61', 'sec-ch-ua': '"Not?A_Brand";v="8", "Ch...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E536173910>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001E536AE8430>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E53848E1D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E53849BD00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001E53848E170>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E53848E1D0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E53849BD00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001E538447670>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001E53848E170>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 706, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E53849BD00>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001E536A665F0>
          └ APIRoute(path='/api/v1/login/access-token', name='login_access_token', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E53849BD00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001E53849A4D0>
          └ APIRoute(path='/api/v1/login/access-token', name='login_access_token', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001E538517160>
                     └ <function get_request_handler.<locals>.app at 0x000001E53846B2E0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 235, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001E536A65240>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 161, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000001E538549F90>, 'form_data': <fastapi.security.oauth2.OAuth2Passwo...
                 │         └ <function login_access_token at 0x000001E5382E2320>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001E53617C9A0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\api\api_v1\endpoints\login.py", line 36, in login_access_token
    data = security.create_access_token(sub=user.user_id, expires_delta=access_token_expires, scopes=form_data.scopes)
           │        │                       │                           │                            │         └ []
           │        │                       │                           │                            └ <fastapi.security.oauth2.OAuth2PasswordRequestForm object at 0x000001E53854A0E0>
           │        │                       │                           └ datetime.timedelta(days=8)
           │        │                       └ User(id=1, email='admin@gmail.com', role='admin_base')
           │        └ <function create_access_token at 0x000001E5380A8A60>
           └ <module 'backend.app.core.security' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\.\\backend\\app\\core\\se...

AttributeError: 'User' object has no attribute 'user_id'
ERROR    2022-12-03 11:30:59.545 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001E533EDE290>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001E533E400D0>
           └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001E533E376D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001E533DA3910>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>
    │    └ <function subprocess_started at 0x000001E536171750>
    └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=756, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001E533DA3010>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=756, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001E53614A320>
           │       │   └ <uvicorn.server.Server object at 0x000001E533DA3010>
           │       └ <function run at 0x000001E535A34AF0>
           └ <module 'asyncio' from 'C:\\Users\\R\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001E53615D070>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001E535A364D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 633, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001E535A36440>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 600, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001E535A37F40>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1896, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001E53423F7F0>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

> File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 407, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E53617D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853EF50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001E538446A10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E53617D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\applications.py", line 270, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853EF50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853EF50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E53848E2F0>
          └ <fastapi.applications.FastAPI object at 0x000001E538446A10>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E536173910>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E53848E2F0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '61', 'sec-ch-ua': '"Not?A_Brand";v="8", "Ch...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E536173910>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001E536AE8430>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E53848E1D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E53849BD00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001E53848E170>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E53848E1D0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E53849BD00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001E538447670>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001E53848E170>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 706, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E53849BD00>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001E536A665F0>
          └ APIRoute(path='/api/v1/login/access-token', name='login_access_token', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E53849BD00>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E53853E...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001E53849A4D0>
          └ APIRoute(path='/api/v1/login/access-token', name='login_access_token', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001E538517160>
                     └ <function get_request_handler.<locals>.app at 0x000001E53846B2E0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 235, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001E536A65240>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 161, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000001E538549F90>, 'form_data': <fastapi.security.oauth2.OAuth2Passwo...
                 │         └ <function login_access_token at 0x000001E5382E2320>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001E53617C9A0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\api\api_v1\endpoints\login.py", line 36, in login_access_token
    data = security.create_access_token(sub=user.user_id, expires_delta=access_token_expires, scopes=form_data.scopes)
           │        │                       │                           │                            │         └ []
           │        │                       │                           │                            └ <fastapi.security.oauth2.OAuth2PasswordRequestForm object at 0x000001E53854A0E0>
           │        │                       │                           └ datetime.timedelta(days=8)
           │        │                       └ User(id=1, email='admin@gmail.com', role='admin_base')
           │        └ <function create_access_token at 0x000001E5380A8A60>
           └ <module 'backend.app.core.security' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\.\\backend\\app\\core\\se...

AttributeError: 'User' object has no attribute 'user_id'
INFO     2022-12-03 11:31:03.322 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62046 - "POST /api/v1/login/access-token HTTP/1.1" 500
ERROR    2022-12-03 11:31:03.322 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001E533EDE290>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001E533E400D0>
           └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001E533E376D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001E533DA3910>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>
    │    └ <function subprocess_started at 0x000001E536171750>
    └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=756, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001E533DA3010>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=756, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001E53614A320>
           │       │   └ <uvicorn.server.Server object at 0x000001E533DA3010>
           │       └ <function run at 0x000001E535A34AF0>
           └ <module 'asyncio' from 'C:\\Users\\R\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001E53615D070>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001E535A364D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 633, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001E535A36440>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 600, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001E535A37F40>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1896, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001E53423F7F0>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

> File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 407, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E53617D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3B20>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001E538446A10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E53617D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\applications.py", line 270, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3B20>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3B20>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E53848E2F0>
          └ <fastapi.applications.FastAPI object at 0x000001E538446A10>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E5386DCDC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E53848E2F0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '61', 'sec-ch-ua': '"Not?A_Brand";v="8", "Ch...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E5386DCDC0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001E536AE8430>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E53848E1D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E5386DCD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001E53848E170>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E53848E1D0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E5386DCD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001E538447670>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001E53848E170>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 706, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E5386DCD30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001E536A665F0>
          └ APIRoute(path='/api/v1/login/access-token', name='login_access_token', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E5386DCD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001E53849A4D0>
          └ APIRoute(path='/api/v1/login/access-token', name='login_access_token', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001E5385C1FF0>
                     └ <function get_request_handler.<locals>.app at 0x000001E53846B2E0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 235, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001E536A65240>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 161, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000001E5385C0D90>, 'form_data': <fastapi.security.oauth2.OAuth2Passwo...
                 │         └ <function login_access_token at 0x000001E5382E2320>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001E53617C9A0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\api\api_v1\endpoints\login.py", line 36, in login_access_token
    data = security.create_access_token(sub=user.user_id, expires_delta=access_token_expires, scopes=form_data.scopes)
           │        │                       │                           │                            │         └ []
           │        │                       │                           │                            └ <fastapi.security.oauth2.OAuth2PasswordRequestForm object at 0x000001E5385C35B0>
           │        │                       │                           └ datetime.timedelta(days=8)
           │        │                       └ User(id=1, email='admin@gmail.com', role='admin_base')
           │        └ <function create_access_token at 0x000001E5380A8A60>
           └ <module 'backend.app.core.security' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\.\\backend\\app\\core\\se...

AttributeError: 'User' object has no attribute 'user_id'
ERROR    2022-12-03 11:31:03.333 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 320
               │     └ 3
               └ <function _main at 0x000001E533EDE290>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 320
           │    └ <function BaseProcess._bootstrap at 0x000001E533E400D0>
           └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x000001E533E376D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001E533DA3910>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>
    │    └ <function subprocess_started at 0x000001E536171750>
    └ <SpawnProcess name='SpawnProcess-1' parent=32076 started>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=756, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x000001E533DA3010>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=756, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000001E53614A320>
           │       │   └ <uvicorn.server.Server object at 0x000001E533DA3010>
           │       └ <function run at 0x000001E535A34AF0>
           └ <module 'asyncio' from 'C:\\Users\\R\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000001E53615D070>
           │    └ <function BaseEventLoop.run_until_complete at 0x000001E535A364D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 633, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001E535A36440>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 600, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001E535A37F40>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1896, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001E53423F7F0>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

> File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 407, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E53617D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3B20>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000001E538446A10>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E53617D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\applications.py", line 270, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3B20>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3B20>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E53848E2F0>
          └ <fastapi.applications.FastAPI object at 0x000001E538446A10>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E5386DCDC0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E53848E2F0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '61', 'sec-ch-ua': '"Not?A_Brand";v="8", "Ch...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000001E5386DCDC0>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x000001E536AE8430>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E53848E1D0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E53848E200>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E5386DCD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001E53848E170>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E53848E1D0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E5386DCD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000001E538447670>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001E53848E170>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 706, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E5386DCD30>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x000001E536A665F0>
          └ APIRoute(path='/api/v1/login/access-token', name='login_access_token', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000001E5386DCD30>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000001E5385C3...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000001E53849A4D0>
          └ APIRoute(path='/api/v1/login/access-token', name='login_access_token', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000001E5385C1FF0>
                     └ <function get_request_handler.<locals>.app at 0x000001E53846B2E0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 235, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x000001E536A65240>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 161, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000001E5385C0D90>, 'form_data': <fastapi.security.oauth2.OAuth2Passwo...
                 │         └ <function login_access_token at 0x000001E5382E2320>
                 └ <fastapi.dependencies.models.Dependant object at 0x000001E53617C9A0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\api\api_v1\endpoints\login.py", line 36, in login_access_token
    data = security.create_access_token(sub=user.user_id, expires_delta=access_token_expires, scopes=form_data.scopes)
           │        │                       │                           │                            │         └ []
           │        │                       │                           │                            └ <fastapi.security.oauth2.OAuth2PasswordRequestForm object at 0x000001E5385C35B0>
           │        │                       │                           └ datetime.timedelta(days=8)
           │        │                       └ User(id=1, email='admin@gmail.com', role='admin_base')
           │        └ <function create_access_token at 0x000001E5380A8A60>
           └ <module 'backend.app.core.security' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\.\\backend\\app\\core\\se...

AttributeError: 'User' object has no attribute 'user_id'
INFO     2022-12-03 11:31:35.568 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:31:35.568 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:31:35.678 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:31:35.679 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:31:35.680 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:31:35.680 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:31:35.680 request id: app - uvicorn.server:serve - Finished server process [29620]
INFO     2022-12-03 11:31:35.680 request id: app - uvicorn.server:serve - Finished server process [29620]
INFO     2022-12-03 11:31:37.327 request id: app - uvicorn.server:serve - Started server process [22588]
INFO     2022-12-03 11:31:37.327 request id: app - uvicorn.server:serve - Started server process [22588]
INFO     2022-12-03 11:31:37.327 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:31:37.328 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:31:37.328 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:31:37.328 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:31:39.772 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62065 - "POST /api/v1/login/access-token HTTP/1.1" 200
INFO     2022-12-03 11:33:06.308 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:33:06.308 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:33:06.417 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:33:06.417 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:33:06.418 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:33:06.418 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:33:06.418 request id: app - uvicorn.server:serve - Finished server process [22588]
INFO     2022-12-03 11:33:06.418 request id: app - uvicorn.server:serve - Finished server process [22588]
INFO     2022-12-03 11:33:07.947 request id: app - uvicorn.server:serve - Started server process [8320]
INFO     2022-12-03 11:33:07.947 request id: app - uvicorn.server:serve - Started server process [8320]
INFO     2022-12-03 11:33:07.947 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:33:07.947 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:33:07.949 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:33:07.949 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:33:11.611 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62131 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 11:33:11.943 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62131 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 11:33:45.177 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:33:45.177 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:33:45.288 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:33:45.288 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:33:45.289 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:33:45.289 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:33:45.289 request id: app - uvicorn.server:serve - Finished server process [8320]
INFO     2022-12-03 11:33:45.290 request id: app - uvicorn.server:serve - Finished server process [8320]
INFO     2022-12-03 11:33:46.773 request id: app - uvicorn.server:serve - Started server process [14636]
INFO     2022-12-03 11:33:46.773 request id: app - uvicorn.server:serve - Started server process [14636]
INFO     2022-12-03 11:33:46.774 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:33:46.774 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:33:46.775 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:33:46.775 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:33:47.791 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62153 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 11:33:48.058 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62153 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 11:34:00.601 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:34:00.601 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:35:08.166 request id: app - uvicorn.server:serve - Started server process [10732]
INFO     2022-12-03 11:35:08.166 request id: app - uvicorn.server:serve - Started server process [10732]
INFO     2022-12-03 11:35:08.167 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:35:08.167 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:35:08.168 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:35:08.168 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:35:11.309 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62190 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 11:35:11.568 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62190 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 11:35:16.744 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62191 - "POST /api/v1/users/3/report HTTP/1.1" 422
INFO     2022-12-03 11:35:50.597 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:35:50.598 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:35:50.709 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:35:50.709 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:35:50.709 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:35:50.710 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:35:50.710 request id: app - uvicorn.server:serve - Finished server process [10732]
INFO     2022-12-03 11:35:50.711 request id: app - uvicorn.server:serve - Finished server process [10732]
INFO     2022-12-03 11:35:52.409 request id: app - uvicorn.server:serve - Started server process [8832]
INFO     2022-12-03 11:35:52.410 request id: app - uvicorn.server:serve - Started server process [8832]
INFO     2022-12-03 11:35:52.410 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:35:52.410 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:35:52.411 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:35:52.411 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:35:54.610 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62208 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 11:35:54.912 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62208 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 11:36:00.074 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62209 - "PATCH /api/v1/users/3/report HTTP/1.1" 422
INFO     2022-12-03 11:36:14.460 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:36:14.461 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:36:14.569 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:36:14.569 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:36:14.570 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:36:14.570 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:36:14.570 request id: app - uvicorn.server:serve - Finished server process [8832]
INFO     2022-12-03 11:36:14.571 request id: app - uvicorn.server:serve - Finished server process [8832]
INFO     2022-12-03 11:36:16.012 request id: app - uvicorn.server:serve - Started server process [16816]
INFO     2022-12-03 11:36:16.012 request id: app - uvicorn.server:serve - Started server process [16816]
INFO     2022-12-03 11:36:16.013 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:36:16.014 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:36:16.015 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:36:16.016 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:36:17.261 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62219 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 11:36:17.529 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62219 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 11:41:17.124 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:41:17.124 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:41:18.586 request id: app - uvicorn.server:serve - Started server process [20932]
INFO     2022-12-03 11:41:18.587 request id: app - uvicorn.server:serve - Started server process [20932]
INFO     2022-12-03 11:41:18.587 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:41:18.587 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:41:18.588 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:41:18.588 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:41:20.128 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62380 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 11:41:20.468 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62380 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 11:42:08.585 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62381 - "GET /api/v1/users/3/report?ext=json&start_timestamp=2021-12-03T11%3A41%3A18.483582%2B03%3A00&end_timestamp=2023-12-03T11%3A41%3A18.483582%2B03%3A00 HTTP/1.1" 200
INFO     2022-12-03 11:42:40.608 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62523 - "GET /api/v1/users/3/report?ext=csv&start_timestamp=2021-12-03T11%3A41%3A18.483582%2B03%3A00&end_timestamp=2023-12-03T11%3A41%3A18.483582%2B03%3A00 HTTP/1.1" 200
INFO     2022-12-03 11:42:46.951 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:42:46.951 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:42:47.059 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:42:47.059 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:42:47.060 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:42:47.060 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:42:47.061 request id: app - uvicorn.server:serve - Finished server process [20932]
INFO     2022-12-03 11:42:47.061 request id: app - uvicorn.server:serve - Finished server process [20932]
INFO     2022-12-03 11:44:08.347 request id: app - uvicorn.server:serve - Started server process [21000]
INFO     2022-12-03 11:44:08.347 request id: app - uvicorn.server:serve - Started server process [21000]
INFO     2022-12-03 11:44:08.348 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:44:08.348 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:44:08.348 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:44:08.349 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:44:10.570 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62549 - "GET /api/v1/users/3/report?ext=csv&start_timestamp=2021-12-03T11%3A41%3A18.483582%2B03%3A00&end_timestamp=2023-12-03T11%3A41%3A18.483582%2B03%3A00 HTTP/1.1" 200
INFO     2022-12-03 11:45:32.260 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:45:32.260 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:45:32.369 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:45:32.369 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:45:32.370 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:45:32.370 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:45:32.371 request id: app - uvicorn.server:serve - Finished server process [21000]
INFO     2022-12-03 11:45:32.371 request id: app - uvicorn.server:serve - Finished server process [21000]
INFO     2022-12-03 11:45:34.207 request id: app - uvicorn.server:serve - Started server process [9204]
INFO     2022-12-03 11:45:34.208 request id: app - uvicorn.server:serve - Started server process [9204]
INFO     2022-12-03 11:45:34.209 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:45:34.209 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:45:34.209 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:45:34.210 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:45:35.125 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62657 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 11:45:35.458 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62657 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 11:45:42.652 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62658 - "GET /api/v1/users/5/report?ext=json&start_timestamp=2021-12-03T11%3A45%3A34.097760%2B03%3A00&end_timestamp=2023-12-03T11%3A45%3A34.097760%2B03%3A00 HTTP/1.1" 200
INFO     2022-12-03 11:46:24.525 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:46:24.525 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:46:24.634 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:46:24.634 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:46:24.634 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:46:24.634 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:46:24.636 request id: app - uvicorn.server:serve - Finished server process [9204]
INFO     2022-12-03 11:46:24.636 request id: app - uvicorn.server:serve - Finished server process [9204]
INFO     2022-12-03 11:48:15.445 request id: app - uvicorn.server:serve - Started server process [15392]
INFO     2022-12-03 11:48:15.445 request id: app - uvicorn.server:serve - Started server process [15392]
INFO     2022-12-03 11:48:15.446 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:48:15.446 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:48:15.448 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:48:15.448 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:48:24.664 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62965 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 11:48:24.925 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62965 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 11:48:31.601 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:62966 - "GET /api/v1/users/3/report?ext=json&start_timestamp=2021-12-03T11%3A48%3A15.344408%2B03%3A00&end_timestamp=2023-12-03T11%3A48%3A15.344408%2B03%3A00 HTTP/1.1" 200
INFO     2022-12-03 11:50:45.908 request id: app - uvicorn.server:serve - Started server process [24960]
INFO     2022-12-03 11:50:45.908 request id: app - uvicorn.server:serve - Started server process [24960]
INFO     2022-12-03 11:50:45.909 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:50:45.910 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:50:45.910 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:50:45.910 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:50:49.198 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:63024 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 11:50:49.356 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:63024 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 11:50:57.699 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:63025 - "POST /api/v1/login/access-token HTTP/1.1" 200
INFO     2022-12-03 11:51:03.288 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 11:51:03.290 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:51:03.290 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 11:51:03.294 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:51:03.297 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role not exist
INFO     2022-12-03 11:51:03.335 request id: app - backend.app.api.deps:create_user_in_role - CREATE_user_in_role: iam965
INFO     2022-12-03 11:51:03.335 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 11:51:03.338 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:51:03.338 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 11:51:03.340 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 11:51:03.341 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 11:51:03.382 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:63041 - "GET /api/v1/users/3/report?ext=csv&start_timestamp=2021-12-03T11%3A50%3A45.805730%2B03%3A00&end_timestamp=2023-12-03T11%3A50%3A45.805730%2B03%3A00 HTTP/1.1" 200
INFO     2022-12-03 11:51:24.737 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 11:51:24.738 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:51:24.739 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 11:51:24.741 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:51:24.742 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role exist
INFO     2022-12-03 11:51:24.742 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 11:51:24.744 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:51:24.744 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 11:51:24.746 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 11:51:24.746 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 11:51:24.786 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:63050 - "GET /api/v1/users/3/report?ext=csv&start_timestamp=2021-12-03T11%3A50%3A45.805730%2B03%3A00&end_timestamp=2023-12-03T11%3A50%3A45.805730%2B03%3A00 HTTP/1.1" 200
INFO     2022-12-03 11:51:49.529 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:51:49.529 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:51:49.637 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:51:49.637 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:51:49.638 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:51:49.638 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:51:49.639 request id: app - uvicorn.server:serve - Finished server process [24960]
INFO     2022-12-03 11:51:49.639 request id: app - uvicorn.server:serve - Finished server process [24960]
INFO     2022-12-03 11:52:04.395 request id: app - uvicorn.server:serve - Started server process [17296]
INFO     2022-12-03 11:52:04.396 request id: app - uvicorn.server:serve - Started server process [17296]
INFO     2022-12-03 11:52:04.396 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:52:04.397 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 11:52:04.399 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:52:04.399 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 11:52:05.588 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 11:52:05.590 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:52:05.590 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 11:52:05.593 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:52:05.596 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role exist
INFO     2022-12-03 11:52:05.596 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 11:52:05.599 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:52:05.599 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 11:52:05.602 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 11:52:05.602 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 11:52:05.648 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:63068 - "GET /api/v1/users/3/report?ext=csv&start_timestamp=2021-12-03T11%3A50%3A45.805730%2B03%3A00&end_timestamp=2023-12-03T11%3A50%3A45.805730%2B03%3A00 HTTP/1.1" 200
INFO     2022-12-03 11:52:10.636 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 11:52:10.637 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:52:10.637 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 11:52:10.639 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:52:10.641 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role exist
INFO     2022-12-03 11:52:10.641 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 11:52:10.643 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 11:52:10.643 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 11:52:10.645 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 11:52:10.645 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 11:52:10.684 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:63068 - "GET /api/v1/users/3/report?ext=json&start_timestamp=2021-12-03T11%3A50%3A45.805730%2B03%3A00&end_timestamp=2023-12-03T11%3A50%3A45.805730%2B03%3A00 HTTP/1.1" 200
INFO     2022-12-03 11:52:40.626 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:52:40.626 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 11:52:40.735 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:52:40.735 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 11:52:40.735 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:52:40.736 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 11:52:40.736 request id: app - uvicorn.server:serve - Finished server process [17296]
INFO     2022-12-03 11:52:40.737 request id: app - uvicorn.server:serve - Finished server process [17296]
INFO     2022-12-03 12:00:57.960 request id: app - uvicorn.server:serve - Started server process [6164]
INFO     2022-12-03 12:00:57.961 request id: app - uvicorn.server:serve - Started server process [6164]
INFO     2022-12-03 12:00:57.961 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 12:00:57.962 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 12:00:57.962 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 12:00:57.962 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 12:01:02.871 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 12:01:02.872 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 12:01:02.981 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 12:01:02.981 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 12:01:02.982 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 12:01:02.982 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 12:01:02.983 request id: app - uvicorn.server:serve - Finished server process [6164]
INFO     2022-12-03 12:01:02.984 request id: app - uvicorn.server:serve - Finished server process [6164]
INFO     2022-12-03 12:01:04.708 request id: app - uvicorn.server:serve - Started server process [6488]
INFO     2022-12-03 12:01:04.709 request id: app - uvicorn.server:serve - Started server process [6488]
INFO     2022-12-03 12:01:04.709 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 12:01:04.709 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 12:01:04.710 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 12:01:04.710 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 12:01:05.474 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:63398 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 12:01:05.918 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:63398 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 12:01:12.938 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:63399 - "GET /api/v1/users/3/report?ext=json&start_timestamp=2021-12-03T12%3A01%3A04.595467%2B03%3A00&end_timestamp=2023-12-03T12%3A01%3A04.595467%2B03%3A00 HTTP/1.1" 401
INFO     2022-12-03 12:01:18.712 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:63411 - "POST /api/v1/login/access-token HTTP/1.1" 200
INFO     2022-12-03 12:01:20.818 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 12:01:20.821 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:01:20.821 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 12:01:20.823 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:01:20.827 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role exist
INFO     2022-12-03 12:01:20.828 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 12:01:20.830 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:01:20.830 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 12:01:20.833 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 12:01:20.833 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 12:01:20.873 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:63411 - "GET /api/v1/users/3/report?ext=json&start_timestamp=2021-12-03T12%3A01%3A04.595467%2B03%3A00&end_timestamp=2023-12-03T12%3A01%3A04.595467%2B03%3A00 HTTP/1.1" 200
INFO     2022-12-03 12:01:38.421 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 12:01:38.421 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 12:01:38.530 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 12:01:38.530 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 12:01:38.531 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 12:01:38.531 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 12:01:38.532 request id: app - uvicorn.server:serve - Finished server process [6488]
INFO     2022-12-03 12:01:38.532 request id: app - uvicorn.server:serve - Finished server process [6488]
INFO     2022-12-03 12:44:44.170 request id: app - uvicorn.server:serve - Started server process [25788]
INFO     2022-12-03 12:44:44.170 request id: app - uvicorn.server:serve - Started server process [25788]
INFO     2022-12-03 12:44:44.171 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 12:44:44.171 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 12:44:44.172 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 12:44:44.173 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 12:44:48.236 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64370 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 12:44:48.698 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64370 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 12:44:52.096 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64370 - "POST /api/v1/login/access-token HTTP/1.1" 200
INFO     2022-12-03 12:45:06.995 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 12:45:06.999 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:45:06.999 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 12:45:07.001 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:45:07.005 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role exist
INFO     2022-12-03 12:45:07.006 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 12:45:07.007 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:45:07.008 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 12:45:07.011 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 12:45:07.011 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 12:45:07.951 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64371 - "GET /api/v1/tasks/?sort=%5B%22id%22%2C%20%22ASC%22%5D&range=%5B0%2C%2010%5D HTTP/1.1" 200
INFO     2022-12-03 12:46:00.108 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 12:46:00.110 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:46:00.110 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 12:46:00.113 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:46:00.115 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role exist
INFO     2022-12-03 12:46:00.115 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 12:46:00.117 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:46:00.118 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 12:46:00.120 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 12:46:00.120 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 12:46:00.221 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64403 - "POST /api/v1/tasks/ HTTP/1.1" 500
ERROR    2022-12-03 12:46:00.222 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 442, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
    │    │             │             │      └ (5, 2, 3, 'string', 'string', 'accepted', 'low', datetime.datetime(2022, 12, 3, 12, 44, 43, 945767, tzinfo=datetime.timezone(...
    │    │             │             └ <function PreparedStatement.fetch at 0x000002641A7984C0>
    │    │             └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000002641AD12750>
    │    └ <member '_rows' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
                 │                   │        └ None
                 │                   └ (5, 2, 3, 'string', 'string', 'accepted', 'low', datetime.datetime(2022, 12, 3, 12, 44, 43, 945767, tzinfo=datetime.timezone(...
                 └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000002641AD12750>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                            └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000002641AD12750>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
                 │        └ <asyncpg.protocol.protocol.Protocol object at 0x000002641A7CD640>
                 └ <function PreparedStatement.__bind_execute.<locals>.<lambda> at 0x000002641AD17880>

  File "asyncpg\protocol\protocol.pyx", line 201, in bind_execute

asyncpg.exceptions.InsufficientPrivilegeError: new row violates row-level security policy for table "task"


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1900, in _execute_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000002641A0731C0>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000002641A9C7070>
    └ <sqlalchemy.future.engine.Connection object at 0x000002641AD54CD0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (5, 2, 3, 'string', 'string', 'accepted', 'low', datetime.datetime(2022, 12, 3, 12, 44, 43, 945767, tzinfo=datetime.timezone(...
    │      │       └ 'INSERT INTO task (client_id, author_id, executor_id, name, description, status, priority, create_date, deadline_date, comple...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000002641A4408B0>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 68, in await_only
    return current.driver.switch(awaitable)
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000002641ACE4F20>
           └ <_AsyncIoGreenlet object at 0x000002641AA11C80 (otid=0x000002641926A1F0) dead>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 121, in greenlet_spawn
    value = await result
                  └ <coroutine object Transaction.rollback at 0x000002641ABDA5E0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000002641A440670>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InsufficientPrivilegeError('new row violates row-level security policy for table "task"')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
          │                     └ InsufficientPrivilegeError('new row violates row-level security policy for table "task"')
          └ ProgrammingError('<class \'asyncpg.exceptions.InsufficientPrivilegeError\'>: new row violates row-level security policy for t...

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.InsufficientPrivilegeError'>: new row violates row-level security policy for table "task"


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 332
               │     └ 3
               └ <function _main at 0x000002641653E290>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 332
           │    └ <function BaseProcess._bootstrap at 0x00000264164A00D0>
           └ <SpawnProcess name='SpawnProcess-1' parent=32464 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000264164976D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=32464 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000026416403910>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=32464 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=32464 started>
    │    └ <function subprocess_started at 0x0000026418881750>
    └ <SpawnProcess name='SpawnProcess-1' parent=32464 started>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=724, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000026416403010>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=724, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002641885A320>
           │       │   └ <uvicorn.server.Server object at 0x0000026416403010>
           │       └ <function run at 0x00000264180F4AF0>
           └ <module 'asyncio' from 'C:\\Users\\R\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002641886D070>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000264180F64D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 633, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000264180F6440>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 600, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000264180F7F40>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1896, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000264168DF7F0>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

> File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 407, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002641888D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54940>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002641AB4EE90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002641888D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\applications.py", line 270, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54940>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54940>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002641AB9E770>
          └ <fastapi.applications.FastAPI object at 0x000002641AB4EE90>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002641ACDEA70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002641AB9E680>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002641AB9E770>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '299', 'sec-ch-ua': '"Not?A_Brand";v="8", "C...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002641ACDEA70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000264191F8430>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002641AB9E680>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002641AB9E680...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002641AB9E650>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002641AB9E680>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002641ACDEF80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002641AB9E5F0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002641AB9E650>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002641ACDEF80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002641AB4FAF0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002641AB9E5F0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 706, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002641ACDEF80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000264191765F0>
          └ APIRoute(path='/api/v1/tasks/', name='create_task', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002641ACDEF80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002641ABAB1C0>
          └ APIRoute(path='/api/v1/tasks/', name='create_task', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002641AC540A0>
                     └ <function get_request_handler.<locals>.app at 0x000002641ABAB130>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 235, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000026419175240>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 161, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ <unprintable dict object>
                 │         └ <function create_task at 0x000002641AA884C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002641ABFF6D0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\api\api_v1\endpoints\tasks.py", line 42, in create_task
    item = await crud.task.create(db=db, obj_in=item_in)
                 │    │    │         │          └ TaskCreate(client_id=5, author_id=2, executor_id=3, name='string', description='string', status='accepted', priority='low', c...
                 │    │    │         └ <sqlalchemy.orm.session.AsyncSession object at 0x000002641AC26F50>
                 │    │    └ <function CRUDTask.create at 0x000002641A9F2320>
                 │    └ <backend.app.crud.task.CRUDTask object at 0x000002641A9C75B0>
                 └ <module 'backend.app.crud' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\.\\backend\\app\\crud\\__init__.py'>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\crud\task.py", line 20, in create
    await db.commit()
          │  └ <function AsyncSession.commit at 0x000002641A366C20>
          └ <sqlalchemy.orm.session.AsyncSession object at 0x000002641AC26F50>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 582, in commit
    return await greenlet_spawn(self.sync_session.commit)
                 │              │    │            └ <function Session.commit at 0x000002641A2F2680>
                 │              │    └ <sqlalchemy.orm.session.Session object at 0x000002641AC277C0>
                 │              └ <sqlalchemy.orm.session.AsyncSession object at 0x000002641AC26F50>
                 └ <function greenlet_spawn at 0x00000264192F0DC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 128, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x000002641AA11C80 (otid=0x000002641926A1F0) dead>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1451, in commit
    self._transaction.commit(_to_root=self.future)
    │    │                            │    └ True
    │    │                            └ <sqlalchemy.orm.session.Session object at 0x000002641AC277C0>
    │    └ None
    └ <sqlalchemy.orm.session.Session object at 0x000002641AC277C0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\session.py", line 829, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000002641A2F15A0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000002641AC27010>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\session.py", line 808, in _prepare_impl
    self.session.flush()
    │    └ None
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000002641AC27010>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3444, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000002641A2F44C0>
    └ <sqlalchemy.orm.session.Session object at 0x000002641AC277C0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3583, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\venv\\lib\\site-packages\\sqlalchem...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 70, in __exit__
    compat.raise_(
    │      └ <function raise_ at 0x0000026419286050>
    └ <module 'sqlalchemy.util.compat' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\venv\\lib\\site-packages\\sq...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\compat.py", line 210, in raise_
    raise exception

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3544, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000002641A2D6D40>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000002641AC27A00>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 456, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000002641AC27A00>
    │   └ <function SaveUpdateAll.execute at 0x000002641A2D7640>
    └ SaveUpdateAll(mapped class Task->task)

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000002641A2D4820>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\venv\\lib\\site-packages...
    │    └ <sqlalchemy.util._preloaded._ModuleRegistry object at 0x00000264192180D0>
    └ <module 'sqlalchemy.util' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\venv\\lib\\site-packages\\sqlalchem...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 245, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000002641A2D4E50>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1238, in _emit_insert_statements
    result = connection._execute_20(
             │          └ <function Connection._execute_20 at 0x0000026419FC1E10>
             └ <sqlalchemy.future.engine.Connection object at 0x000002641AD54CD0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1705, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
           │    │     │             │               └ {'compiled_cache': {(<sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000002641A9C7070>, ('0', <class 's...
           │    │     │             └ immutabledict({})
           │    │     └ ({'deadline_date': datetime.datetime(2022, 12, 3, 9, 45, 31, 719000, tzinfo=datetime.timezone.utc), 'executor_id': 3, 'author...
           │    └ <sqlalchemy.future.engine.Connection object at 0x000002641AD54CD0>
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000002641AC27C70>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000026419FC1C60>
           └ <sqlalchemy.future.engine.Connection object at 0x000002641AD54CD0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1572, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000026419FC1F30>
          └ <sqlalchemy.future.engine.Connection object at 0x000002641AD54CD0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1943, in _execute_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000026419FC20E0>
    └ <sqlalchemy.future.engine.Connection object at 0x000002641AD54CD0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2124, in _handle_dbapi_exception
    util.raise_(
    │    └ <function raise_ at 0x0000026419286050>
    └ <module 'sqlalchemy.util' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\venv\\lib\\site-packages\\sqlalchem...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\compat.py", line 210, in raise_
    raise exception

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1900, in _execute_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000002641A0731C0>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000002641A9C7070>
    └ <sqlalchemy.future.engine.Connection object at 0x000002641AD54CD0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (5, 2, 3, 'string', 'string', 'accepted', 'low', datetime.datetime(2022, 12, 3, 12, 44, 43, 945767, tzinfo=datetime.timezone(...
    │      │       └ 'INSERT INTO task (client_id, author_id, executor_id, name, description, status, priority, create_date, deadline_date, comple...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000002641A4408B0>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 68, in await_only
    return current.driver.switch(awaitable)
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000002641ACE4F20>
           └ <_AsyncIoGreenlet object at 0x000002641AA11C80 (otid=0x000002641926A1F0) dead>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 121, in greenlet_spawn
    value = await result
                  └ <coroutine object Transaction.rollback at 0x000002641ABDA5E0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000002641A440670>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InsufficientPrivilegeError('new row violates row-level security policy for table "task"')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
          │                     └ InsufficientPrivilegeError('new row violates row-level security policy for table "task"')
          └ ProgrammingError('<class \'asyncpg.exceptions.InsufficientPrivilegeError\'>: new row violates row-level security policy for t...

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InsufficientPrivilegeError'>: new row violates row-level security policy for table "task"
[SQL: INSERT INTO task (client_id, author_id, executor_id, name, description, status, priority, create_date, deadline_date, completion_date) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s) RETURNING task.id]
[parameters: (5, 2, 3, 'string', 'string', 'accepted', 'low', datetime.datetime(2022, 12, 3, 12, 44, 43, 945767, tzinfo=datetime.timezone(datetime.timedelta(seconds=10800))), datetime.datetime(2022, 12, 3, 9, 45, 31, 719000, tzinfo=datetime.timezone.utc), datetime.datetime(2022, 12, 3, 9, 45, 31, 719000, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/14/f405)
ERROR    2022-12-03 12:46:00.250 request id: app - uvicorn.protocols.http.h11_impl:run_asgi - Exception in ASGI application

Traceback (most recent call last):

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 442, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
    │    │             │             │      └ (5, 2, 3, 'string', 'string', 'accepted', 'low', datetime.datetime(2022, 12, 3, 12, 44, 43, 945767, tzinfo=datetime.timezone(...
    │    │             │             └ <function PreparedStatement.fetch at 0x000002641A7984C0>
    │    │             └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000002641AD12750>
    │    └ <member '_rows' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
                 │                   │        └ None
                 │                   └ (5, 2, 3, 'string', 'string', 'accepted', 'low', datetime.datetime(2022, 12, 3, 12, 44, 43, 945767, tzinfo=datetime.timezone(...
                 └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000002641AD12750>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                            └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000002641AD12750>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
                 │        └ <asyncpg.protocol.protocol.Protocol object at 0x000002641A7CD640>
                 └ <function PreparedStatement.__bind_execute.<locals>.<lambda> at 0x000002641AD17880>

  File "asyncpg\protocol\protocol.pyx", line 201, in bind_execute

asyncpg.exceptions.InsufficientPrivilegeError: new row violates row-level security policy for table "task"


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1900, in _execute_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000002641A0731C0>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000002641A9C7070>
    └ <sqlalchemy.future.engine.Connection object at 0x000002641AD54CD0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (5, 2, 3, 'string', 'string', 'accepted', 'low', datetime.datetime(2022, 12, 3, 12, 44, 43, 945767, tzinfo=datetime.timezone(...
    │      │       └ 'INSERT INTO task (client_id, author_id, executor_id, name, description, status, priority, create_date, deadline_date, comple...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000002641A4408B0>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 68, in await_only
    return current.driver.switch(awaitable)
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000002641ACE4F20>
           └ <_AsyncIoGreenlet object at 0x000002641AA11C80 (otid=0x000002641926A1F0) dead>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 121, in greenlet_spawn
    value = await result
                  └ <coroutine object Transaction.rollback at 0x000002641ABDA5E0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000002641A440670>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InsufficientPrivilegeError('new row violates row-level security policy for table "task"')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
          │                     └ InsufficientPrivilegeError('new row violates row-level security policy for table "task"')
          └ ProgrammingError('<class \'asyncpg.exceptions.InsufficientPrivilegeError\'>: new row violates row-level security policy for t...

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.InsufficientPrivilegeError'>: new row violates row-level security policy for table "task"


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 332
               │     └ 3
               └ <function _main at 0x000002641653E290>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 332
           │    └ <function BaseProcess._bootstrap at 0x00000264164A00D0>
           └ <SpawnProcess name='SpawnProcess-1' parent=32464 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x00000264164976D0>
    └ <SpawnProcess name='SpawnProcess-1' parent=32464 started>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\multiprocessing\process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000026416403910>, 'target': <bound method Server.run of <uvicorn.server.Server...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=32464 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=32464 started>
    │    └ <function subprocess_started at 0x0000026418881750>
    └ <SpawnProcess name='SpawnProcess-1' parent=32464 started>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\_subprocess.py", line 76, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=724, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x0000026416403010>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=724, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 8000)>]
           │       │   │    └ <function Server.serve at 0x000002641885A320>
           │       │   └ <uvicorn.server.Server object at 0x0000026416403010>
           │       └ <function run at 0x00000264180F4AF0>
           └ <module 'asyncio' from 'C:\\Users\\R\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\__init__.py'>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x000002641886D070>
           │    └ <function BaseEventLoop.run_until_complete at 0x00000264180F64D0>
           └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 633, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000264180F6440>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 600, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000264180F7F40>
    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\base_events.py", line 1896, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000264168DF7F0>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

  File "C:\Users\R\AppData\Local\Programs\Python\Python310\lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finis...lt='ROLLBACK'>)>

> File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 407, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002641888D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\uvicorn\middleware\proxy_headers.py", line 78, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54940>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x000002641AB4EE90>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000002641888D060>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\applications.py", line 270, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54940>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\applications.py", line 124, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54940>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002641AB9E770>
          └ <fastapi.applications.FastAPI object at 0x000002641AB4EE90>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002641ACDEA70>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002641AB9E680>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000002641AB9E770>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'content-length': '299', 'sec-ch-ua': '"Not?A_Brand";v="8", "C...
          │    │               │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x000002641ACDEA70>
          │    │               │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x00000264191F8430>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002641AB9E680>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002641AB9E680...
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002641AB9E650>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002641AB9E680>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002641ACDEF80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002641AB9E5F0>
          └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002641AB9E650>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 21, in __call__
    raise e

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002641ACDEF80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <fastapi.routing.APIRouter object at 0x000002641AB4FAF0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000002641AB9E5F0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 706, in __call__
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002641ACDEF80>
          │     │      │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x00000264191765F0>
          └ APIRoute(path='/api/v1/tasks/', name='create_task', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ExceptionMiddleware.__call__.<locals>.sender at 0x000002641ACDEF80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.h11_impl.RequestResponseCycle object at 0x000002641AD54...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x000002641ABAB1C0>
          └ APIRoute(path='/api/v1/tasks/', name='create_task', methods=['POST'])

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
                     │    └ <starlette.requests.Request object at 0x000002641AC540A0>
                     └ <function get_request_handler.<locals>.app at 0x000002641ABAB130>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 235, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x0000026419175240>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\fastapi\routing.py", line 161, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ <unprintable dict object>
                 │         └ <function create_task at 0x000002641AA884C0>
                 └ <fastapi.dependencies.models.Dependant object at 0x000002641ABFF6D0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\api\api_v1\endpoints\tasks.py", line 42, in create_task
    item = await crud.task.create(db=db, obj_in=item_in)
                 │    │    │         │          └ TaskCreate(client_id=5, author_id=2, executor_id=3, name='string', description='string', status='accepted', priority='low', c...
                 │    │    │         └ <sqlalchemy.orm.session.AsyncSession object at 0x000002641AC26F50>
                 │    │    └ <function CRUDTask.create at 0x000002641A9F2320>
                 │    └ <backend.app.crud.task.CRUDTask object at 0x000002641A9C75B0>
                 └ <module 'backend.app.crud' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\.\\backend\\app\\crud\\__init__.py'>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\.\backend\app\crud\task.py", line 20, in create
    await db.commit()
          │  └ <function AsyncSession.commit at 0x000002641A366C20>
          └ <sqlalchemy.orm.session.AsyncSession object at 0x000002641AC26F50>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 582, in commit
    return await greenlet_spawn(self.sync_session.commit)
                 │              │    │            └ <function Session.commit at 0x000002641A2F2680>
                 │              │    └ <sqlalchemy.orm.session.Session object at 0x000002641AC277C0>
                 │              └ <sqlalchemy.orm.session.AsyncSession object at 0x000002641AC26F50>
                 └ <function greenlet_spawn at 0x00000264192F0DC0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 128, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x000002641AA11C80 (otid=0x000002641926A1F0) dead>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\session.py", line 1451, in commit
    self._transaction.commit(_to_root=self.future)
    │    │                            │    └ True
    │    │                            └ <sqlalchemy.orm.session.Session object at 0x000002641AC277C0>
    │    └ None
    └ <sqlalchemy.orm.session.Session object at 0x000002641AC277C0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\session.py", line 829, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0x000002641A2F15A0>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000002641AC27010>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\session.py", line 808, in _prepare_impl
    self.session.flush()
    │    └ None
    └ <sqlalchemy.orm.session.SessionTransaction object at 0x000002641AC27010>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3444, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x000002641A2F44C0>
    └ <sqlalchemy.orm.session.Session object at 0x000002641AC277C0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3583, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\venv\\lib\\site-packages\\sqlalchem...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 70, in __exit__
    compat.raise_(
    │      └ <function raise_ at 0x0000026419286050>
    └ <module 'sqlalchemy.util.compat' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\venv\\lib\\site-packages\\sq...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\compat.py", line 210, in raise_
    raise exception

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\session.py", line 3544, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x000002641A2D6D40>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000002641AC27A00>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 456, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x000002641AC27A00>
    │   └ <function SaveUpdateAll.execute at 0x000002641A2D7640>
    └ SaveUpdateAll(mapped class Task->task)

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 630, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x000002641A2D4820>
    │    │         └ <module 'sqlalchemy.orm.persistence' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\venv\\lib\\site-packages...
    │    └ <sqlalchemy.util._preloaded._ModuleRegistry object at 0x00000264192180D0>
    └ <module 'sqlalchemy.util' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\venv\\lib\\site-packages\\sqlalchem...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 245, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x000002641A2D4E50>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\orm\persistence.py", line 1238, in _emit_insert_statements
    result = connection._execute_20(
             │          └ <function Connection._execute_20 at 0x0000026419FC1E10>
             └ <sqlalchemy.future.engine.Connection object at 0x000002641AD54CD0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1705, in _execute_20
    return meth(self, args_10style, kwargs_10style, execution_options)
           │    │     │             │               └ {'compiled_cache': {(<sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000002641A9C7070>, ('0', <class 's...
           │    │     │             └ immutabledict({})
           │    │     └ ({'deadline_date': datetime.datetime(2022, 12, 3, 9, 45, 31, 719000, tzinfo=datetime.timezone.utc), 'executor_id': 3, 'author...
           │    └ <sqlalchemy.future.engine.Connection object at 0x000002641AD54CD0>
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x000002641AC27C70>>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 334, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000026419FC1C60>
           └ <sqlalchemy.future.engine.Connection object at 0x000002641AD54CD0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1572, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000026419FC1F30>
          └ <sqlalchemy.future.engine.Connection object at 0x000002641AD54CD0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1943, in _execute_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000026419FC20E0>
    └ <sqlalchemy.future.engine.Connection object at 0x000002641AD54CD0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 2124, in _handle_dbapi_exception
    util.raise_(
    │    └ <function raise_ at 0x0000026419286050>
    └ <module 'sqlalchemy.util' from 'C:\\Users\\R\\PycharmProjects\\fastapi-react-crm-backend\\venv\\lib\\site-packages\\sqlalchem...

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\compat.py", line 210, in raise_
    raise exception

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\base.py", line 1900, in _execute_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000002641A0731C0>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000002641A9C7070>
    └ <sqlalchemy.future.engine.Connection object at 0x000002641AD54CD0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\engine\default.py", line 736, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (5, 2, 3, 'string', 'string', 'accepted', 'low', datetime.datetime(2022, 12, 3, 12, 44, 43, 945767, tzinfo=datetime.timezone(...
    │      │       └ 'INSERT INTO task (client_id, author_id, executor_id, name, description, status, priority, create_date, deadline_date, comple...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000002641A4408B0>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 479, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 68, in await_only
    return current.driver.switch(awaitable)
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000002641ACE4F20>
           └ <_AsyncIoGreenlet object at 0x000002641AA11C80 (otid=0x000002641926A1F0) dead>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 121, in greenlet_spawn
    value = await result
                  └ <coroutine object Transaction.rollback at 0x000002641ABDA5E0>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 454, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000002641A440670>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 389, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InsufficientPrivilegeError('new row violates row-level security policy for table "task"')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002641ACE4B30>

  File "C:\Users\R\PycharmProjects\fastapi-react-crm-backend\venv\lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 682, in _handle_exception
    raise translated_error from error
          │                     └ InsufficientPrivilegeError('new row violates row-level security policy for table "task"')
          └ ProgrammingError('<class \'asyncpg.exceptions.InsufficientPrivilegeError\'>: new row violates row-level security policy for t...

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InsufficientPrivilegeError'>: new row violates row-level security policy for table "task"
[SQL: INSERT INTO task (client_id, author_id, executor_id, name, description, status, priority, create_date, deadline_date, completion_date) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s) RETURNING task.id]
[parameters: (5, 2, 3, 'string', 'string', 'accepted', 'low', datetime.datetime(2022, 12, 3, 12, 44, 43, 945767, tzinfo=datetime.timezone(datetime.timedelta(seconds=10800))), datetime.datetime(2022, 12, 3, 9, 45, 31, 719000, tzinfo=datetime.timezone.utc), datetime.datetime(2022, 12, 3, 9, 45, 31, 719000, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/14/f405)
INFO     2022-12-03 12:46:14.808 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 12:46:14.810 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:46:14.810 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 12:46:14.812 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:46:14.814 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role exist
INFO     2022-12-03 12:46:14.815 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 12:46:14.816 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:46:14.817 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 12:46:14.818 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 12:46:14.819 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 12:46:14.822 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64407 - "GET /api/v1/tasks/2 HTTP/1.1" 200
INFO     2022-12-03 12:46:21.060 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 12:46:21.061 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:46:21.062 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 12:46:21.064 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:46:21.065 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role exist
INFO     2022-12-03 12:46:21.065 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 12:46:21.067 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:46:21.067 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 12:46:21.069 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 12:46:21.069 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 12:46:21.071 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64409 - "GET /api/v1/tasks/123 HTTP/1.1" 404
INFO     2022-12-03 12:47:01.108 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 12:47:01.110 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:47:01.110 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 12:47:01.113 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:47:01.114 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role exist
INFO     2022-12-03 12:47:01.114 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 12:47:01.117 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:47:01.117 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 12:47:01.119 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 12:47:01.120 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 12:47:01.128 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64415 - "GET /api/v1/users/employees?sort=%5B%22id%22%2C%20%22ASC%22%5D&range=%5B0%2C%2010%5D HTTP/1.1" 200
INFO     2022-12-03 12:47:27.135 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 12:47:27.136 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:47:27.136 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 12:47:27.138 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:47:27.139 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role exist
INFO     2022-12-03 12:47:27.140 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 12:47:27.142 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 12:47:27.142 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 12:47:27.144 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 12:47:27.144 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 12:47:27.151 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64424 - "GET /api/v1/users/role/manager_base?sort=%5B%22id%22%2C%20%22ASC%22%5D&range=%5B0%2C%2010%5D HTTP/1.1" 200
INFO     2022-12-03 12:47:38.001 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 12:47:38.001 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 12:47:38.112 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 12:47:38.112 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 12:47:38.113 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 12:47:38.113 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 12:47:38.113 request id: app - uvicorn.server:serve - Finished server process [25788]
INFO     2022-12-03 12:47:38.114 request id: app - uvicorn.server:serve - Finished server process [25788]
INFO     2022-12-03 12:50:54.731 request id: app - uvicorn.server:serve - Started server process [26108]
INFO     2022-12-03 12:50:54.732 request id: app - uvicorn.server:serve - Started server process [26108]
INFO     2022-12-03 12:50:54.732 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 12:50:54.732 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 12:50:54.733 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 12:50:54.733 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 12:50:56.701 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64486 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 12:50:57.144 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64486 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 12:51:43.089 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 12:51:43.089 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 12:51:43.197 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 12:51:43.197 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 12:51:43.198 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 12:51:43.198 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 12:51:43.198 request id: app - uvicorn.server:serve - Finished server process [26108]
INFO     2022-12-03 12:51:43.198 request id: app - uvicorn.server:serve - Finished server process [26108]
INFO     2022-12-03 12:51:45.026 request id: app - uvicorn.server:serve - Started server process [5284]
INFO     2022-12-03 12:51:45.026 request id: app - uvicorn.server:serve - Started server process [5284]
INFO     2022-12-03 12:51:45.027 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 12:51:45.027 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 12:51:45.028 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 12:51:45.028 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 12:51:57.215 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64513 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 12:51:57.547 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64513 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 12:53:53.068 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 12:53:53.068 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 12:53:53.175 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 12:53:53.175 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 12:53:53.176 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 12:53:53.176 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 12:53:53.177 request id: app - uvicorn.server:serve - Finished server process [5284]
INFO     2022-12-03 12:53:53.177 request id: app - uvicorn.server:serve - Finished server process [5284]
INFO     2022-12-03 12:53:55.017 request id: app - uvicorn.server:serve - Started server process [26448]
INFO     2022-12-03 12:53:55.019 request id: app - uvicorn.server:serve - Started server process [26448]
INFO     2022-12-03 12:53:55.019 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 12:53:55.020 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 12:53:55.020 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 12:53:55.020 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 12:53:59.599 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64608 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 12:54:00.345 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64608 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 12:55:37.935 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 12:55:37.935 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 12:55:38.045 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 12:55:38.046 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 12:55:38.046 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 12:55:38.046 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 12:55:38.047 request id: app - uvicorn.server:serve - Finished server process [26448]
INFO     2022-12-03 12:55:38.048 request id: app - uvicorn.server:serve - Finished server process [26448]
INFO     2022-12-03 12:56:42.035 request id: app - uvicorn.server:serve - Started server process [20292]
INFO     2022-12-03 12:56:42.036 request id: app - uvicorn.server:serve - Started server process [20292]
INFO     2022-12-03 12:56:42.036 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 12:56:42.036 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 12:56:42.036 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 12:56:42.036 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 12:56:49.665 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64659 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 12:56:49.985 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64659 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 12:57:06.590 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 12:57:06.590 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 12:57:06.700 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 12:57:06.700 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 12:57:06.701 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 12:57:06.701 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 12:57:06.701 request id: app - uvicorn.server:serve - Finished server process [20292]
INFO     2022-12-03 12:57:06.702 request id: app - uvicorn.server:serve - Finished server process [20292]
INFO     2022-12-03 13:00:00.631 request id: app - uvicorn.server:serve - Started server process [13908]
INFO     2022-12-03 13:00:00.632 request id: app - uvicorn.server:serve - Started server process [13908]
INFO     2022-12-03 13:00:00.632 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 13:00:00.632 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 13:00:00.633 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 13:00:00.633 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 13:00:31.087 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64731 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 13:00:31.381 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64731 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 13:01:14.316 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 13:01:14.316 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 13:01:15.837 request id: app - uvicorn.server:serve - Started server process [2236]
INFO     2022-12-03 13:01:15.837 request id: app - uvicorn.server:serve - Started server process [2236]
INFO     2022-12-03 13:01:15.838 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 13:01:15.838 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 13:01:15.839 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 13:01:15.840 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 13:01:18.922 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64755 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 13:01:19.168 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64755 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 13:02:15.258 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 13:02:15.258 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 13:02:15.366 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 13:02:15.366 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 13:02:15.367 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 13:02:15.367 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 13:02:15.367 request id: app - uvicorn.server:serve - Finished server process [2236]
INFO     2022-12-03 13:02:15.368 request id: app - uvicorn.server:serve - Finished server process [2236]
INFO     2022-12-03 13:02:16.911 request id: app - uvicorn.server:serve - Started server process [15988]
INFO     2022-12-03 13:02:16.912 request id: app - uvicorn.server:serve - Started server process [15988]
INFO     2022-12-03 13:02:16.912 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 13:02:16.912 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 13:02:16.913 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 13:02:16.913 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 13:02:18.256 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64776 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 13:02:18.530 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64776 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 13:02:30.842 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64777 - "GET /api/v1/users/admin_base?sort=%5B%22id%22%2C%20%22ASC%22%5D&range=%5B0%2C%2010%5D HTTP/1.1" 401
INFO     2022-12-03 13:02:38.594 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64798 - "POST /api/v1/login/access-token HTTP/1.1" 200
INFO     2022-12-03 13:02:40.081 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 13:02:40.083 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 13:02:40.084 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 13:02:40.088 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 13:02:40.090 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role exist
INFO     2022-12-03 13:02:40.090 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 13:02:40.092 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 13:02:40.093 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 13:02:40.095 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 13:02:40.095 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 13:02:40.102 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64798 - "GET /api/v1/users/admin_base?sort=%5B%22id%22%2C%20%22ASC%22%5D&range=%5B0%2C%2010%5D HTTP/1.1" 200
INFO     2022-12-03 13:02:51.660 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 13:02:51.660 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 13:02:51.769 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 13:02:51.769 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 13:02:51.770 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 13:02:51.770 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 13:02:51.770 request id: app - uvicorn.server:serve - Finished server process [15988]
INFO     2022-12-03 13:02:51.771 request id: app - uvicorn.server:serve - Finished server process [15988]
INFO     2022-12-03 13:04:40.009 request id: app - uvicorn.server:serve - Started server process [12956]
INFO     2022-12-03 13:04:40.009 request id: app - uvicorn.server:serve - Started server process [12956]
INFO     2022-12-03 13:04:40.010 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 13:04:40.010 request id: app - uvicorn.lifespan.on:startup - Waiting for application startup.
INFO     2022-12-03 13:04:40.011 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 13:04:40.011 request id: app - uvicorn.lifespan.on:startup - Application startup complete.
INFO     2022-12-03 13:04:45.256 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64857 - "GET /docs HTTP/1.1" 200
INFO     2022-12-03 13:04:45.538 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64857 - "GET /api/v1/openapi.json HTTP/1.1" 200
INFO     2022-12-03 13:04:52.412 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64858 - "GET /api/v1/users/admin_base?sort=%5B%22id%22%2C%20%22ASC%22%5D&range=%5B0%2C%2010%5D HTTP/1.1" 401
INFO     2022-12-03 13:05:06.255 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64873 - "GET /api/v1/users/3/report?ext=csv&start_timestamp=2021-12-03T13%3A04%3A39.901481%2B03%3A00&end_timestamp=2023-12-03T13%3A04%3A39.901481%2B03%3A00 HTTP/1.1" 401
INFO     2022-12-03 13:05:12.080 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64875 - "POST /api/v1/login/access-token HTTP/1.1" 200
INFO     2022-12-03 13:05:13.301 request id: app - backend.app.api.deps:get_current_user_async - START
INFO     2022-12-03 13:05:13.303 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 13:05:13.303 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 13:05:13.306 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 13:05:13.309 request id: app - backend.app.api.deps:check_rolname - check_rolname: iam965 role exist
INFO     2022-12-03 13:05:13.310 request id: app - backend.app.api.deps:reset_session_user - RESET_session_user
INFO     2022-12-03 13:05:13.311 request id: app - backend.app.api.deps:get_session_user - get_session_user: postgres
INFO     2022-12-03 13:05:13.311 request id: app - backend.app.api.deps:set_session_user - SET_session_user: iam965
INFO     2022-12-03 13:05:13.314 request id: app - backend.app.api.deps:get_session_user - get_session_user: iam965
INFO     2022-12-03 13:05:13.314 request id: app - backend.app.api.deps:get_current_user_async - END
INFO     2022-12-03 13:05:13.355 request id: app - uvicorn.protocols.http.h11_impl:send - 127.0.0.1:64875 - "GET /api/v1/users/3/report?ext=csv&start_timestamp=2021-12-03T13%3A04%3A39.901481%2B03%3A00&end_timestamp=2023-12-03T13%3A04%3A39.901481%2B03%3A00 HTTP/1.1" 200
INFO     2022-12-03 13:05:21.549 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 13:05:21.549 request id: app - uvicorn.server:shutdown - Shutting down
INFO     2022-12-03 13:05:21.659 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 13:05:21.660 request id: app - uvicorn.lifespan.on:shutdown - Waiting for application shutdown.
INFO     2022-12-03 13:05:21.660 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 13:05:21.660 request id: app - uvicorn.lifespan.on:shutdown - Application shutdown complete.
INFO     2022-12-03 13:05:21.660 request id: app - uvicorn.server:serve - Finished server process [12956]
INFO     2022-12-03 13:05:21.661 request id: app - uvicorn.server:serve - Finished server process [12956]
